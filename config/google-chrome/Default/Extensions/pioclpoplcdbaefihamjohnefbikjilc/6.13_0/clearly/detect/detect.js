/*! Copyright 2009-2017 Evernote Corporation. All rights reserved. */

function initClearlyComponent__detect(a){if(!a)return!1;var b=a;switch(!0){case!b.callbacks:case!b.callbacks.finished:case!b.window:case!b.window.document:case!b.window.document.body:case!b.jQuery:return b.debug&&(console.log(!b.callbacks),console.log(!b.callbacks.finished),console.log(!b.window),console.log(!b.window.document),console.log(!b.window.document.body),console.log(!b.jQuery)),!1}b.document=b.window.document,b.settings||(b.settings={});var c=function(a,c){b.settings[a]||(b.settings[a]=c)};c("articleTitleMarker__start",'<div id="articleHeader"><h1 id="articleHeader__title">'),c("articleTitleMarker__end",'</h1><div id="articleHeader__separator"></div></div>');var d=b.jQuery;if(b.$window=d(b.window),b.$document=d(b.document),b.language="general",b.domainName=b.window.location.hostname,b.domainNameIs__wikipedia=null!=b.domainName.match(/wikipedia.org$/gi),b.domainNameIs__wsj=null!=b.domainName.match(/wsj.com$/gi),b.parseOptions={_elements_ignore:"|button|input|select|textarea|optgroup|command|datalist|--|frame|frameset|noframes|--|style|link|script|noscript|--|canvas|applet|map|--|marquee|area|base|",_elements_ignore_tag:"|form|fieldset|details|dir|--|center|font|",_elements_container:"|body|--|article|section|--|div|--|td|--|li|--|dd|dt|",_elements_self_closing:"|br|hr|--|img|--|col|--|source|--|embed|param|",_elements_visible:"|article|section|--|ul|ol|li|dd|--|table|tr|td|--|div|--|p|--|h1|h2|h3|h4|h5|h6|--|span|",_elements_too_much_content:"|b|i|em|strong|--|h1|h2|h3|h4|h5|--|td|",_elements_link_density:"|div|--|table|ul|ol|--|section|aside|header|",_elements_floating:"|div|--|table|",_elements_above_target_ignore:"|br|--|ul|ol|dl|--|table|",_elements_with_src:"|img|video|audio|source|embed|iframe|",_unskippable_attribute:"clearly__unskippable_element",_unskippable_attribute_value:"yes",_use_document_title_attribute:"clearly__use_document_title_as_article_title",_use_document_title_attribute_value:"yes",_find_this_in_page_attribute:"",_elements_keep_attributes:{a:["href","title","name"],img:["src","width","height","alt","title"],video:["src","width","height","poster","audio","preload","autoplay","loop","controls"],audio:["src","preload","autoplay","loop","controls"],source:["src","type"],object:["data","type","width","height","classid","codebase","codetype"],param:["name","value"],embed:["src","type","width","height","flashvars","allowscriptaccess","allowfullscreen","bgcolor"],iframe:["src","width","height","frameborder","scrolling"],td:["colspan","rowspan"],th:["colspan","rowspan"]},_skip_link_from_domain:["doubleclick.net","fastclick.net","adbrite.com","adbureau.net","admob.com","bannersxchange.com","buysellads.com","impact-ad.jp","atdmt.com","advertising.com","serving-sys.com","itmedia.jp","microad.jp","adplan-ds.com"],_skip_image_from_domain:["googlesyndication.com","fastclick.net",".2mdn.net","de17a.com","content.aimatch.com","bannersxchange.com","buysellads.com","atdmt.com","advertising.com","serving-sys.com","impact-ad.jp","itmedia.jp","microad.jp","adplan-ds.com"],_keep_video_from_domain:["youtube.com","youtube-nocookie.com","vimeo.com","hulu.com","flickr.com","yahoo.com","newsnetz.ch"]},b.isFrameset="frameset"===document.body.tagName.toLowerCase(),b.isFrameset&&(b.parseOptions._elements_ignore="|button|input|select|textarea|optgroup|command|datalist|--|style|link|script|noscript|--|canvas|applet|map|--|marquee|area|base|"),b.debug=b.debug||!1,b.debugRemembered={},b.debugTimers=[],b.debug){switch(!0){case!(!b.window.console||!b.window.console.log):b.logOneline=function(a){b.window.console.log(a)};break;case!(!b.window.opera||!b.window.opera.postError):b.logOneline=function(a){b.window.opera.postError(a)};break;default:b.logOneline=function(a){}}b.log=function(){if(b.debug){for(var a=0,c=arguments.length;a<c;a++)b.logOneline(arguments[a]);b.logOneline("-----------------------------------------")}},b.debugRemember=function(a,c){b.debugRemembered[a]=c},b.debugOutline=function(a,c,e){var f="#ff5500",g="rgba(255, 85, 0, 0.5)";switch(!0){case!b.debug:case!(1===a.nodeType):case!(a.tagName>""):case"object"==a.tagName.toLowerCase():case"embed"==a.tagName.toLowerCase():return}switch(!0){case"target"==c&&"first"==e:f="#00cc00",g="rgba(0, 255, 0, 0.5)";break;case"target"==c&&"second"==e:f="#0000cc",g="rgba(0, 0, 255, 0.5)";break;case"target"==c&&"next-page"==e:f="#FF80C0",g="rgba(255, 128, 192, 0.5)";break;case"target"==c&&"add-above"==e:f="#804000",g="rgba(128, 64, 0, 0.5)";break;case"clean-before"==c&&"floating"==e:f="#808080",g="rgba(128, 128, 128, 0.5)";break;case"clean-after"==c&&"missing-density"==e:f="#C0C0C0",g="rgba(192, 192, 192, 0.5)";break;case"clean-after"==c||"clean-before"==c:f="#000000",g="rgba(0, 0, 0, 0.5)"}d(a).attr("readable__outline",c+": "+e),d(a).css({outline:"5px solid "+f,"background-color":""+g})},b.debugTimerStart=function(a){b.debugTimers.push({name:a,start:(new Date).getTime()})},b.debugTimerEnd=function(){var a=b.debugTimers.pop(),c=(new Date).getTime()-a.start;return b.log("TIMER / "+a.name+": "+c),c}}else b.logOneline=function(){return!1},b.log=function(){return!1},b.debugRemember=function(){return!1},b.debugOutline=function(){return!1},b.debugTimerStart=function(){return!1},b.debugTimerEnd=function(){return!1};return b.escape_html=function(a){var b={"&":"amp",'"':"quot","<":"lt",">":"gt"};return a&&a.replace?a.replace(/[&"<>]/g,function(a){return"&"+b[a]+";"}):""},b.rand=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},b.detectLanguage=function(){for(var a=b.document.title,c=function(c){if(!(a.length>500))for(var d=c.length,e=0,f=Math.min(5,d);e<f;e++)a+=" "+c[b.rand(1,d)-1].innerHTML.replace(/<([^>]+?)>/gi,"").replace(/([ \n\r\t]+)/gi," ").substr(0,150)},d=b.document.getElementsByTagName("p"),e=b.document.getElementsByTagName("span"),f=b.document.getElementsByTagName("div"),g=[b.document.body],h=[],i=0,j=f.length;i<j;i++)f[i].id&&f[i].id.indexOf&&0===f[i].id.indexOf("evernote_clearly__")||h.push(f[i]);switch(f=h,c(d),c(e),c(f),c(g),!0){case null!=a.match(/([\u3000])/gi):case null!=a.match(/([\u3001])/gi):case null!=a.match(/([\u3002])/gi):case null!=a.match(/([\u301C])/gi):b.language="cjk"}},b.rtl=!1,b.maybeRTL=!1,b.makeRTL=function(){b.rtl=!0},b.makeNotRTL=function(){b.rtl=!1},function(){b.$document.find("html, body").each(function(a,c){switch(!0){case"rtl"==d(c).attr("dir"):case"rtl"==d(c).css("direction"):case"he"==d(c).attr("lang"):case"he-il"==d(c).attr("lang"):case"ar"==d(c).attr("lang"):case"ur"==d(c).attr("lang"):return b.makeRTL(),!1}return!1}),!b.rtl&&b.$document.find("div[dir='rtl'], table[dir='rtl'], td[dir='rtl']").length>0&&(b.maybeRTL=!0)}(),b.measureText__getTextLength=function(a){var b=a;return b=b.replace(/[\s\n\r]+/gi,""),b.length},b.measureText__getWordCount=function(a){var b=a;b=b.replace(/[\s\n\r]+/gi," "),b=b.replace(/([.,?!:;()\[\]'""-])/gi," $1 "),b=b.replace(/([\u3000])/gi,"[=words(1)]"),b=b.replace(/([\u3001])/gi,"[=words(2)]"),b=b.replace(/([\u3002])/gi,"[=words(4)]"),b=b.replace(/([\u301C])/gi,"[=words(2)]"),b=b.replace(/([\u2026|\u2025])/gi,"[=words(2)]"),b=b.replace(/([\u30FB\uFF65])/gi,"[=words(1)]"),b=b.replace(/([\u300C\u300D])/gi,"[=words(1)]"),b=b.replace(/([\u300E\u300F])/gi,"[=words(1)]"),b=b.replace(/([\u3014\u3015])/gi,"[=words(1)]"),b=b.replace(/([\u3008\u3009])/gi,"[=words(1)]"),b=b.replace(/([\u300A\u300B])/gi,"[=words(1)]"),b=b.replace(/([\u3010\u3011])/gi,"[=words(1)]"),b=b.replace(/([\u3016\u3017])/gi,"[=words(1)]"),b=b.replace(/([\u3018\u3019])/gi,"[=words(1)]"),b=b.replace(/([\u301A\u301B])/gi,"[=words(1)]"),b=b.replace(/([\u301D\u301E\u301F])/gi,"[=words(1)]"),b=b.replace(/([\u30A0])/gi,"[=words(1)]");var c=0,d=b.match(/([^\s\d]{3,})/gi);return c+=null!=d?d.length:0,b.replace(/\[=words\((\d)\)\]/,function(a,b){c+=5*parseInt(b,10)}),c},b.levenshteinDistance=function(a,b){var c=a.length,d=b.length,e=0,f=0,g=[];if(0===Math.min(c,d))return Math.max(c,d);for(e=0;e<=c;e++)g[e]=[],g[e][0]=e;for(f=0;f<=d;f++)g[0][f]=f;for(e=1;e<=c;e++)for(f=1;f<=d;f++)g[e][f]=Math.min(g[e-1][f]+1,g[e][f-1]+1,g[e-1][f-1]+(a.charAt(e-1)===b.charAt(f-1)?0:1));return g[c][d]},b.nextPage__getFirstFragment=function(a){return a=a.replace(/<[^>]+?>/gi,""),a=a.replace(/\s+/gi," "),a.substr(0,2e3)},b.isNodeHidden=function(a,b){if("span"==b)return!1;switch(!0){case a.offsetWidth>0:case a.offsetHeight>0:break;default:switch(!0){case a.offsetLeft>0:case a.offsetTop>0:break;default:if("div"==b&&"inline"==(a.style.display||d.css(a,"display")))break;return!0}}return!1},b.getContent__computePointsForCandidate__do=function(a,b,c,d){var e=d[0]*a,f=d[0]-e;_points_return=c<0?e:0+e+f*Math.pow(c,b),d.unshift(_points_return)},b.getContent__computeDetailsForCandidate__first=function(a,b){var c={};if(a._is__bad)return c;c._count__lines_of_65_characters=a._length__plain_text/65,c._count__paragraphs_of_3_lines=c._count__lines_of_65_characters/3,c._count__paragraphs_of_5_lines=c._count__lines_of_65_characters/5,c._count__paragraphs_of_50_words=a._count__plain_words/50,c._count__paragraphs_of_80_words=a._count__plain_words/80,c._ratio__length__plain_text_to_total_plain_text=a._length__plain_text/b._length__plain_text,c._ratio__count__plain_words_to_total_plain_words=a._count__plain_words/b._count__plain_words,c._ratio__length__links_text_to_plain_text=a._length__links_text/a._length__plain_text,c._ratio__count__links_words_to_plain_words=a._count__links_words/a._count__plain_words,c._ratio__length__links_text_to_all_text=a._length__links_text/a._length__all_text,c._ratio__count__links_words_to_all_words=a._count__links_words/a._count__all_words,c._ratio__length__links_text_to_total_links_text=a._length__links_text/(b._length__links_text+1),c._ratio__count__links_words_to_total_links_words=a._count__links_words/(b._count__links_words+1),c._ratio__count__links_to_total_links=a._count__links/(b._count__links+1),c._ratio__count__links_to_plain_words=2*a._count__links/a._count__plain_words;var d=Math.max(2,Math.ceil(.5*a._count__above_candidates)),e=(1*a._length__above_plain_text+a._length__above_plain_text/d)/2,f=(1*a._count__above_plain_words+a._count__above_plain_words/d)/2;return c._ratio__length__above_plain_text_to_total_plain_text=e/b._length__plain_text,c._ratio__count__above_plain_words_to_total_plain_words=f/b._count__plain_words,c._ratio__count__candidates_to_total_candidates=a._count__candidates/(b._count__candidates+1),c._ratio__count__containers_to_total_containers=a._count__containers/(b._count__containers+1),c},b.getContent__computePointsForCandidate__first=function(a,c){var d=a.__candidate_details,e=[],f=c._length__plain_text/65>250;if(a._is__bad)return[0];if(e.unshift(1e3*(0+d._count__paragraphs_of_3_lines+1.5*d._count__paragraphs_of_5_lines+d._count__paragraphs_of_50_words+1.5*d._count__paragraphs_of_80_words+3*a._count__images_large-.5*(a._count__images_skip+a._count__images_small))),e[0]<0)return[0];var g=Math.max(5,Math.ceil(.25*a._count__pieces)),h=Math.max(5,Math.ceil(.25*a._count__candidates)),i=Math.max(10,Math.ceil(.25*a._count__containers));e.unshift((0+3*e[0]+e[0]/g+e[0]/h+e[0]/i)/6),b.getContent__computePointsForCandidate__do(.1,2,1-(1-d._ratio__length__plain_text_to_total_plain_text),e),b.getContent__computePointsForCandidate__do(.1,2,1-(1-d._ratio__count__plain_words_to_total_plain_words),e),f&&(b.getContent__computePointsForCandidate__do(.1,4,1-(1-d._ratio__length__plain_text_to_total_plain_text),e),b.getContent__computePointsForCandidate__do(.1,4,1-(1-d._ratio__count__plain_words_to_total_plain_words),e)),b.getContent__computePointsForCandidate__do(.1,5,1-d._ratio__length__above_plain_text_to_total_plain_text,e),b.getContent__computePointsForCandidate__do(.1,5,1-d._ratio__count__above_plain_words_to_total_plain_words,e),f&&(b.getContent__computePointsForCandidate__do(.1,10,1-d._ratio__length__above_plain_text_to_total_plain_text,e),b.getContent__computePointsForCandidate__do(.1,10,1-d._ratio__count__above_plain_words_to_total_plain_words,e)),b.getContent__computePointsForCandidate__do(.75,1,1-d._ratio__length__links_text_to_total_links_text,e),b.getContent__computePointsForCandidate__do(.75,1,1-d._ratio__count__links_words_to_total_links_words,e),b.getContent__computePointsForCandidate__do(.75,1,1-d._ratio__count__links_to_total_links,e);var j="cjk"==b.language?.75:.5;return b.getContent__computePointsForCandidate__do(j,1,1-d._ratio__length__links_text_to_plain_text,e),b.getContent__computePointsForCandidate__do(j,1,1-d._ratio__count__links_words_to_plain_words,e),b.getContent__computePointsForCandidate__do(j,1,1-d._ratio__length__links_text_to_all_text,e),b.getContent__computePointsForCandidate__do(j,1,1-d._ratio__count__links_words_to_all_words,e),b.getContent__computePointsForCandidate__do(j,1,1-d._ratio__count__links_to_plain_words,e),b.getContent__computePointsForCandidate__do(.75,1,1-d._ratio__count__candidates_to_total_candidates,e),b.getContent__computePointsForCandidate__do(.75,1,1-d._ratio__count__containers_to_total_containers,e),b.getContent__computePointsForCandidate__do(.75,1,1-d._ratio__count__pieces_to_total_pieces,e),e},b.getContent__processCandidates__first=function(a){var c=a;c.sort(function(a,b){switch(!0){case a.__index<b.__index:return-1;case a.__index>b.__index:return 1;default:return 0}});var e=c[0];b.debug&&b.log("should be body",e,e.__node);for(var f=0,g=c.length;f<g;f++){for(var h=0,i=[],j=f,k=c.length;j<k;j++)c[j]._count__candidates>0||d.contains(c[f].__node,c[j].__node)&&(b.debug&&i.push(c[j]),h++);c[f].__candidate_details=b.getContent__computeDetailsForCandidate__first(c[f],e),c[f]._count__pieces=h,c[f]._array__pieces=i,c[f].__candidate_details._ratio__count__pieces_to_total_pieces=h/(c[0]._count__pieces+1),c[f].__points_history=b.getContent__computePointsForCandidate__first(c[f],e),c[f].__points=c[f].__points_history[0]}return c.sort(function(a,b){switch(!0){case a.__points>b.__points:return-1;case a.__points<b.__points:return 1;default:return 0}}),c},b.getContent__computePointsForCandidate__second=function(a,c){var d=a.__candidate_details,e=a.__candidate_details_second,f=[];if(a._is__bad)return[0];f.unshift(a.__points_history[a.__points_history.length-1]);var g=Math.max(5,Math.ceil(.25*a._count__pieces)),h=Math.max(5,Math.ceil(.25*a._count__candidates)),i=Math.max(10,Math.ceil(.25*a._count__containers));f.unshift((0+3*f[0]+f[0]/g*2+f[0]/h*2+f[0]/i*2)/9),b.getContent__computePointsForCandidate__do(.5,1,1-(1-e._ratio__length__plain_text_to_total_plain_text),f),b.getContent__computePointsForCandidate__do(.5,1,1-(1-e._ratio__count__plain_words_to_total_plain_words),f);var j="cjk"==b.language?.5:.1;b.getContent__computePointsForCandidate__do(j,1,1-e._ratio__length__above_plain_text_to_total_plain_text,f),b.getContent__computePointsForCandidate__do(j,1,1-e._ratio__count__above_plain_words_to_total_plain_words,f),b.getContent__computePointsForCandidate__do(j,1,1-e._ratio__length__above_plain_text_to_plain_text,f),b.getContent__computePointsForCandidate__do(j,1,1-e._ratio__count__above_plain_words_to_plain_words,f),b.getContent__computePointsForCandidate__do(.75,1,1-e._ratio__count__links_to_total_links,f),b.getContent__computePointsForCandidate__do(.75,1,1-e._ratio__length__links_text_to_total_links_text,f),b.getContent__computePointsForCandidate__do(.75,1,1-e._ratio__count__links_words_to_total_links_words,f);var k="cjk"==b.language?.75:.5;return b.getContent__computePointsForCandidate__do(k,1,1-d._ratio__length__links_text_to_plain_text,f),b.getContent__computePointsForCandidate__do(k,1,1-d._ratio__count__links_words_to_plain_words,f),b.getContent__computePointsForCandidate__do(k,1,1-e._ratio__length__links_text_to_all_text,f),b.getContent__computePointsForCandidate__do(k,1,1-e._ratio__count__links_words_to_all_words,f),b.getContent__computePointsForCandidate__do(k,1,1-e._ratio__count__links_to_plain_words,f),b.getContent__computePointsForCandidate__do(.1,2,1-e._ratio__count__candidates_to_total_candidates,f),b.getContent__computePointsForCandidate__do(.1,2,1-e._ratio__count__containers_to_total_containers,f),b.getContent__computePointsForCandidate__do(.1,2,1-e._ratio__count__pieces_to_total_pieces,f),f},b.getContent__computeDetailsForCandidate__second=function(a,b){var c={};if(a._is__bad)return c;c._ratio__length__plain_text_to_total_plain_text=a._length__plain_text/b._length__plain_text,c._ratio__count__plain_words_to_total_plain_words=a._count__plain_words/b._count__plain_words,c._ratio__length__links_text_to_all_text=a._length__links_text/a._length__all_text,c._ratio__count__links_words_to_all_words=a._count__links_words/a._count__all_words,c._ratio__length__links_text_to_total_links_text=a._length__links_text/(b._length__links_text+1),c._ratio__count__links_words_to_total_links_words=a._count__links_words/(b._count__links_words+1),c._ratio__count__links_to_total_links=a._count__links/(b._count__links+1),c._ratio__count__links_to_plain_words=2*a._count__links/a._count__plain_words;var d=Math.max(2,Math.ceil(.5*(a._count__above_candidates-b._count__above_candidates))),e=(1*a.__second_length__above_plain_text+a.__second_length__above_plain_text/d)/2,f=(1*a.__second_count__above_plain_words+a.__second_count__above_plain_words/d)/2;return c._ratio__length__above_plain_text_to_total_plain_text=e/b._length__plain_text,c._ratio__count__above_plain_words_to_total_plain_words=f/b._count__plain_words,c._ratio__length__above_plain_text_to_plain_text=e/a._length__plain_text,c._ratio__count__above_plain_words_to_plain_words=f/a._count__plain_words,c._ratio__count__candidates_to_total_candidates=Math.max(0,a._count__candidates-.25*b._count__candidates)/(b._count__candidates+1),c._ratio__count__containers_to_total_containers=Math.max(0,a._count__containers-.25*b._count__containers)/(b._count__containers+1),c._ratio__count__pieces_to_total_pieces=Math.max(0,a._count__pieces-.25*b._count__pieces)/(b._count__pieces+1),c},b.getContent__processCandidates__second=function(a){var c=a,e=c[0];c=d.map(c,function(a,b){switch(!0){case!(b>0):case!d.contains(e.__node,a.__node):return null;default:return a}}),c.unshift(e),c.sort(function(a,b){switch(!0){case a.__index<b.__index:return-1;case a.__index>b.__index:return 1;default:return 0}});for(var f=0,g=c.length;f<g;f++)c[f].__second_length__above_plain_text=c[f]._length__above_plain_text-e._length__above_plain_text,c[f].__second_count__above_plain_words=c[f]._count__above_plain_words-e._count__above_plain_words,c[f].__candidate_details_second=b.getContent__computeDetailsForCandidate__second(c[f],e),c[f].__points_history_second=b.getContent__computePointsForCandidate__second(c[f],e),c[f].__points_second=c[f].__points_history_second[0];return c.sort(function(a,b){switch(!0){case a.__points_second>b.__points_second:return-1;case a.__points_second<b.__points_second:return 1;default:return 0}}),c},b.getContent__computePointsForCandidate__third=function(a,c){var d=a.__candidate_details,e=a.__candidate_details_second,f=[];if(a._is__bad)return[0];f.unshift(a.__points_history[a.__points_history.length-1]);var g=Math.max(2,Math.ceil(.25*a._count__pieces)),h=Math.max(2,Math.ceil(.25*a._count__candidates)),i=Math.max(4,Math.ceil(.25*a._count__containers));return f.unshift((0+3*f[0]+f[0]/g*2+f[0]/h*2+f[0]/i*2)/9),b.getContent__computePointsForCandidate__do(.75,1,1-(1-e._ratio__length__plain_text_to_total_plain_text),f),b.getContent__computePointsForCandidate__do(.75,1,1-(1-e._ratio__count__plain_words_to_total_plain_words),f),b.getContent__computePointsForCandidate__do(.5,1,1-d._ratio__length__above_plain_text_to_total_plain_text,f),b.getContent__computePointsForCandidate__do(.5,1,1-d._ratio__count__above_plain_words_to_total_plain_words,f),b.getContent__computePointsForCandidate__do(.1,1,1-e._ratio__length__above_plain_text_to_total_plain_text,f),b.getContent__computePointsForCandidate__do(.1,1,1-e._ratio__count__above_plain_words_to_total_plain_words,f),b.getContent__computePointsForCandidate__do(.1,1,1-e._ratio__length__above_plain_text_to_plain_text,f),b.getContent__computePointsForCandidate__do(.1,1,1-e._ratio__count__above_plain_words_to_plain_words,f),b.getContent__computePointsForCandidate__do(.5,1,1-d._ratio__length__links_text_to_all_text,f),b.getContent__computePointsForCandidate__do(.5,1,1-d._ratio__count__links_words_to_all_words,f),b.getContent__computePointsForCandidate__do(.5,1,1-d._ratio__length__links_text_to_plain_text,f),b.getContent__computePointsForCandidate__do(.5,1,1-d._ratio__count__links_words_to_plain_words,f),b.getContent__computePointsForCandidate__do(.5,1,1-d._ratio__count__links_to_plain_words,f),b.getContent__computePointsForCandidate__do(.5,1,1-d._ratio__count__candidates_to_total_candidates,f),b.getContent__computePointsForCandidate__do(.5,1,1-d._ratio__count__containers_to_total_containers,f),b.getContent__computePointsForCandidate__do(.5,1,1-d._ratio__count__pieces_to_total_pieces,f),f},b.getContent__exploreNodeAndGetStuff=function(a,c,e){var f=0,g=!1,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o="",p="",q=[],r=[],s=[],t=function(a){f++;var u=3===a.nodeType?"#text":1===a.nodeType&&a.tagName&&a.tagName>""?a.tagName.toLowerCase():"#invalid",v={__index:f,__node:a,_is__container:b.parseOptions._elements_container.indexOf("|"+u+"|")>-1,_is__candidate:!1,_is__text:!1,_is__link:!1,_is__link_skip:!1,_is__image_small:!1,_is__image_medium:!1,_is__image_large:!1,_is__image_skip:!1,_is__unskippable:!1,_debug__above__plain_text:o,_debug__above__links_text:p,_length__above_plain_text:i,_count__above_plain_words:j,_length__above_links_text:k,_count__above_links_words:l,_length__above_all_text:i+k,_count__above_all_words:j+l,_count__above_candidates:m,_count__above_containers:n,_length__plain_text:0,_count__plain_words:0,_length__links_text:0,_count__links_words:0,_length__all_text:0,_count__all_words:0,_count__containers:0,_count__candidates:0,_count__links:0,_count__links_skip:0,_count__images_small:0,_count__images_medium:0,_count__images_large:0,_count__images_skip:0};if(v._is__container||b.parseOptions._elements_self_closing.indexOf("|"+u+"|")>-1){a.getAttribute(b.parseOptions._unskippable_attribute)==b.parseOptions._unskippable_attribute_value&&(v._is__unskippable=!0)}switch(!0){case"#invalid"==u:case b.parseOptions._elements_ignore.indexOf("|"+u+"|")>-1:return!1;case b.parseOptions._elements_visible.indexOf("|"+u+"|")>-1:if(b.isNodeHidden(a,u))return!1;break;case b.parseOptions._elements_self_closing.indexOf("|"+u+"|")>-1:switch(!0){case"img"==u:break;default:return!1}}switch(!0){case"#text"==u:v._is__text=!0;var w=a.nodeValue;return v._length__plain_text=b.measureText__getTextLength(w),v._count__plain_words=b.measureText__getWordCount(w),g?(k+=v._length__plain_text,l+=v._count__plain_words):(i+=v._length__plain_text,j+=v._count__plain_words),v;case"a"==u:var x;try{x=a.href}catch(a){console.log("Got error while trying to access anchor href. Skipping node.");break}if(!(x>""))break;if(!x.indexOf)break;v._is__link=!0;for(var y=0,z=b.parseOptions._skip_link_from_domain.length;y<z;y++)if(a.href.indexOf(b.parseOptions._skip_link_from_domain[y])>-1){v._is__link_skip=!0;break}g||(g=!0,h=v.__index),s.push(v);break;case"img"==u:if(a.src&&a.src.indexOf)for(var y=0,z=b.parseOptions._skip_image_from_domain.length;y<z;y++)if(a.src.indexOf(b.parseOptions._skip_image_from_domain[y])>-1){v._is__image_skip=!0;break}var A=d(a).width(),B=d(a).height();switch(!0){case A*B>=5e4:case A>=350&&B>=75:v._is__image_large=!0;break;case A*B>=2e4:case A>=150&&B>=150:v._is__image_medium=!0;break;case A<=5&&B<=5:v._is__image_skip=!0;break;default:v._is__image_small=!0}}var C;if("frame"===a.tagName.toLowerCase())try{C=a.contentDocument.body.childNodes}catch(a){console.error("Get frame child error:"+a.message)}else C=a.childNodes;if(e)for(var y=0,z=C.length;y<z;y++){var D=C[y];if(_child_result=t(D),_child_result)switch(v._count__links+=_child_result._count__links+(_child_result._is__link?1:0),v._count__links_skip+=_child_result._count__links_skip+(_child_result._is__link_skip?1:0),v._count__images_small+=_child_result._count__images_small+(_child_result._is__image_small?1:0),v._count__images_medium+=_child_result._count__images_medium+(_child_result._is__image_medium?1:0),v._count__images_large+=_child_result._count__images_large+(_child_result._is__image_large?1:0),v._count__images_skip+=_child_result._count__images_skip+(_child_result._is__image_skip?1:0),v._count__containers+=_child_result._count__containers+(_child_result._is__container?1:0),v._count__candidates+=_child_result._count__candidates+(_child_result._is__candidate?1:0),v._length__all_text+=_child_result._length__plain_text+_child_result._length__links_text,v._count__all_words+=_child_result._count__plain_words+_child_result._count__links_words,!0){case _child_result._is__link:v._length__links_text+=_child_result._length__plain_text+_child_result._length__links_text,v._count__links_words+=_child_result._count__plain_words+_child_result._count__links_words;break;default:v._length__plain_text+=_child_result._length__plain_text,v._count__plain_words+=_child_result._count__plain_words,v._length__links_text+=_child_result._length__links_text,v._count__links_words+=_child_result._count__links_words}}if(v._is__link&&h==v.__index&&(g=!1,h=0),v._is__container||1==v.__index&&1==c)if(q.push(v),v._is__container&&n++,c);else{switch(!0){case"cjk"!=b.language&&2*v._count__links>=v._count__plain_words:case"cjk"!=b.language&&v._length__plain_text<65/3:case"cjk"!=b.language&&v._count__plain_words<5:case"cjk"==b.language&&v._length__plain_text<10:case"cjk"==b.language&&v._count__plain_words<2:break;default:v._is__candidate=!0,r.push(v),m++}1!=v.__index||v._is__candidate||(v._is__candidate=!0,v._is__bad=!0,r.push(v))}return v};return t(a),c?q.pop():{_containers:q,_candidates:r,_links:s}},b.getContent__buildHTMLForNode=function(a,c){var e=0,f="",g=b.getContent__exploreNodeAndGetStuff(a,!0,!0);switch(c){case"above-the-target":g=!1}var h=function(a){e++;var i=!1,j=3===a.nodeType?"#text":1===a.nodeType&&a.tagName&&a.tagName>""?a.tagName.toLowerCase():"#invalid",k=0,l=0,m=0,n=0;switch(!0){case"#invalid"==j:case b.parseOptions._elements_ignore.indexOf("|"+j+"|")>-1:return;case"#text"==j:return void(f+=a.nodeValue.replace(/</gi,"&lt;").replace(/>/gi,"&gt;"))}if(!(b.parseOptions._elements_visible.indexOf("|"+j+"|")>-1&&b.isNodeHidden(a,j))){switch(j){case"object":case"embed":case"iframe":var o="object"==j?d(a).find("param[name='movie']").attr("value"):d(a).attr("src"),p=!(o>"");if(p);else{p=!0;for(var q=0,r=b.parseOptions._keep_video_from_domain.length;q<r;q++)if(o.indexOf(b.parseOptions._keep_video_from_domain[q])>-1){p=!1;break}}if(p&&(!(i=i||b.getContent__exploreNodeAndGetStuff(a,!0,!0))||!i._is__unskippable))return void b.debugOutline(a,"clean-before","object-embed-iframe")}if("a"==j||"li"==j)if((i=i||b.getContent__exploreNodeAndGetStuff(a,!0,!0))&&i._is__unskippable);else switch(!0){case i._is__link_skip:case i._count__images_small+i._count__images_skip>0&&i._length__plain_text<65:return void b.debugOutline(a,"clean-before","skip-link")}if(b.parseOptions._elements_link_density.indexOf("|"+j+"|")>-1)if((i=i||b.getContent__exploreNodeAndGetStuff(a,!0,!0))&&i._is__unskippable);else switch(!0){case i._length__plain_text>390:case"cjk"==b.language&&i._length__plain_text>195:case!(i._count__links>1):case g&&i._length__plain_text/g._length__plain_text>.5:case g&&i._count__plain_words/g._count__plain_words>.5:case 0==i._length__plain_text&&1==i._count__links&&i._length__links_text<65:case i._length__plain_text<25&&i._count__images_large+i._count__images_medium>0:break;case i._length__links_text/i._length__all_text<.5:if(!(i._count__links>0))break;if(!(i._count__links_skip>0))break;if(i._count__links_skip/i._count__links>.25&&i._length__links_text/i._length__all_text<.05)break;default:return void b.debugOutline(a,"clean-before","link-density")}if(b.parseOptions._elements_floating.indexOf("|"+j+"|")>-1)if((i=i||b.getContent__exploreNodeAndGetStuff(a,!0,!0))&&i._is__unskippable);else switch(!0){case i._length__plain_text>390:case"cjk"==b.language&&i._length__plain_text>195:case g&&i._length__plain_text/g._length__plain_text>.25:case g&&i._count__plain_words/g._count__plain_words>.25:case i._length__plain_text<25&&i._length__links_text<25&&i._count__images_large+i._count__images_medium>0:case a.getElementsByTagName&&i._length__plain_text<390&&a.getElementsByTagName("p").length+a.getElementsByTagName("h1").length+a.getElementsByTagName("h2").length+a.getElementsByTagName("h3").length+a.getElementsByTagName("h4").length>0:break;default:var s=d(a).css("float");if("left"!=s&&"right"!=s)break;if(0==i._length__links_text&&i._count__images_large+i._count__images_medium>0)break;return void b.debugOutline(a,"clean-before","floating")}if("above-the-target"==c){if(b.parseOptions._elements_above_target_ignore.indexOf("|"+j+"|")>-1&&(!(i=i||b.getContent__exploreNodeAndGetStuff(a,!0,!0))||!i._is__unskippable))return void b.debugOutline(a,"clean-before","above-target");if("img"==j)if((i=i||b.getContent__exploreNodeAndGetStuff(a,!0,!0))&&i._is__unskippable);else if(!i._is__image_large)return void b.debugOutline(a,"clean-before","above-target")}if(null!=j.match(/^h(1|2|3|4|5|6)$/gi))if((i=i||b.getContent__exploreNodeAndGetStuff(a,!0,!0))&&i._is__unskippable);else switch(!0){case i._length__plain_text<10&&i._count__images_small+i._count__images_medium+i._count__images_skip>0:return void b.debugOutline(a,"clean-before","skip-heading")}if(b.parseOptions._elements_ignore_tag.indexOf("|"+j+"|")>-1);else{if(k=f.length,f+="<"+j,j in b.parseOptions._elements_keep_attributes)for(var q=0,r=b.parseOptions._elements_keep_attributes[j].length;q<r;q++){var t=b.parseOptions._elements_keep_attributes[j][q],u=a.getAttribute(t);if(("src"==t||"href"==t)&&("a"==j||b.parseOptions._elements_with_src.indexOf("|"+j+"|")>-1))switch(!0){case!("src"!=t||!a.src):u=a.src;break;case!("href"!=t||!a.href):u=a.href}u>""&&(f+=" "+t+'="'+b.escape_html(u)+'"')}var v=a.getAttribute("id");v>""&&(f+=' id="'+b.escape_html(v)+'"'),"a"==j&&(f+=' target="_blank"'),b.parseOptions._elements_self_closing.indexOf("|"+j+"|")>-1?f+=" />":f+=">",l=f.length}if(b.parseOptions._elements_self_closing.indexOf("|"+j+"|")>-1);else for(var q=0,r=a.childNodes.length;q<r;q++)h(a.childNodes[q]);switch(!0){case b.parseOptions._elements_ignore_tag.indexOf("|"+j+"|")>-1:return;case b.parseOptions._elements_self_closing.indexOf("|"+j+"|")>-1:m=f.length,n=f.length;break;default:m=f.length,f+="</"+j+">",n=f.length}if(b.domainNameIs__wikipedia&&"|h1|h2|h3|h4|h5|h6|".indexOf("|"+j+"|")>-1&&(f=""+f.substr(0,l)+f.substr(l,m).replace(/<a([^>]+?)>edit<\/a>/gi,"")+f.substr(m)),b.domainNameIs__wsj&&"span"==j&&a.className&&a.className.indexOf("article-chiclet")>-1){var w=f.substr(l,m),x=w.substr(w.indexOf("<a "),w.indexOf("</a>"))+"</a>";f=f.substr(0,k)+"( "+x+" )"+f.substr(n)}if("iframe"==j||"embed"==j||"object"==j)return void(f=f.substr(0,k)+'<div class="readableLargeObjectContainer">'+f.substr(k,n-k)+"</div>");if("img"==j)if((i=i||b.getContent__exploreNodeAndGetStuff(a,!0,!0))&&i._is__unskippable);else switch(!0){case i._is__image_skip:return b.debugOutline(a,"clean-after","skip-img"),void(f=f.substr(0,k));case i._is__image_large:return void(f=f.substr(0,k)+'<div class="readableLargeImageContainer'+(d(a).width()<=250&&d(a).height()>=250?" float":"")+'">'+f.substr(k,n-k).replace(/width="([^=]+?)"/gi,"").replace(/height="([^=]+?)"/gi,"")+"</div>")}if("a"==j)switch(i=i||b.getContent__exploreNodeAndGetStuff(a,!0,!0),!0){case 1==i._count__images_large:return void(f=f.substr(0,l-1)+' class="readableLinkWithLargeImage">'+f.substr(l,m-l)+"</a>");case 1==i._count__images_medium:return void(f=f.substr(0,l-1)+' class="readableLinkWithMediumImage">'+f.substr(l,m-l)+"</a>")}if(b.parseOptions._elements_too_much_content.indexOf("|"+j+"|")>-1)if((i=i||b.getContent__exploreNodeAndGetStuff(a,!0,!0))&&i._is__unskippable);else switch(!0){case"h1"==j&&i._length__all_text>130:case"h2"==j&&i._length__all_text>390:case null!=j.match(/^h(3|4|5|6)$/)&&i._length__all_text>650:
case null!=j.match(/^(b|i|em|strong)$/)&&i._length__all_text>1625:return b.debugOutline(a,"clean-after","too-much-content"),void(f=""+f.substr(0,k)+f.substr(l,m-l))}switch(!0){case b.parseOptions._elements_self_closing.indexOf("|"+j+"|")>-1:case b.parseOptions._elements_ignore_tag.indexOf("|"+j+"|")>-1:case"td"==j:break;default:var y=f.substr(l,m-l);y=y.replace(/(<br \/>)/gi,""),y=y.replace(/(<hr \/>)/gi,""),"tr"==j&&(y=y.replace(/<td[^>]*?>/gi,""),y=y.replace(/<\/td>/gi,"")),"table"==j&&(y=y.replace(/<tr[^>]*?>/gi,""),y=y.replace(/<\/tr>/gi,""));var z=b.measureText__getTextLength(y);if((i=i||b.getContent__exploreNodeAndGetStuff(a,!0,!0))&&i._is__unskippable);else switch(!0){case 0==z&&"p"==j:return void(f=f.substr(0,k)+"<br /><br />");case 0==z:return b.debugOutline(a,"clean-after","blank"),void(f=f.substr(0,k))}}if(b.parseOptions._elements_link_density.indexOf("|"+j+"|")>-1)if((i=i||b.getContent__exploreNodeAndGetStuff(a,!0,!0))&&i._is__unskippable);else{var y=f.substr(l,m-l).replace(/(<([^>]+)>)/gi,""),z=b.measureText__getTextLength(y),A=0+i._length__all_text+10*i._count__images_small+10*i._count__images_skip+10*a.getElementsByTagName("iframe").length+10*a.getElementsByTagName("object").length+10*a.getElementsByTagName("embed").length+10*a.getElementsByTagName("button").length+10*a.getElementsByTagName("input").length+10*a.getElementsByTagName("select").length+10*a.getElementsByTagName("textarea").length;switch(!0){case!(z>0):case!(A>0):case!(z/A<.5):case!("cjk"==b.language&&z/A<.1):case g&&i._length__plain_text/g._length__plain_text>.25:case"cjk"==b.language&&g&&i._length__plain_text/g._length__plain_text>.1:break;default:return b.debugOutline(a,"clean-after","missing-density"),void(f=f.substr(0,k))}}}};return h(a),f},b.getContent__find__hasIsolatedTitleInHTML=function(a){return a.substr(0,b.settings.articleTitleMarker__start.length)==b.settings.articleTitleMarker__start},b.getContent__find__getIsolatedTitleInHTML=function(a){if(!b.getContent__find__hasIsolatedTitleInHTML(a))return"";var c=new RegExp(b.settings.articleTitleMarker__start+"(.*?)"+b.settings.articleTitleMarker__end,"i"),d=a.match(c);return null==d?"":d[1]},b.getContent__find__isolateTitleInHTML=function(a,c){if(b.$document.find("body").attr(b.parseOptions._use_document_title_attribute)==b.parseOptions._use_document_title_attribute_value)return a;for(var d=[/<(h1)[^>]*?>([\s\S]+?)<\/\1>/gi,/<(h2)[^>]*?>([\s\S]+?)<\/\1>/gi,/<(h3|h4|h5|h6)[^>]*?>([\s\S]+?)<\/\1>/gi],e="|h2|h3|h4|h5|h6|",f=" "+c.replace(/<[^>]+?>/gi,"").replace(/\s+/gi," ")+" ",g=0,h=d.length;g<h;g++){var i=d[g].exec(a);switch(!0){case!i:case!(d[g].lastIndex>-1):break;default:var j=d[g].lastIndex,k=j-i[0].length,l=i[1],m=i[2].replace(/<\s*br[^>]*>/gi,"").replace(/[\n\r]+/gi,""),n=m.replace(/<[^>]+?>/gi,"").replace(/\s+/gi," "),o=b.measureText__getTextLength(n),p=[],q=a.substr(0,k),r=b.measureText__getTextLength(q.replace(/<[^>]+?>/gi,"").replace(/\s+/gi," "));switch(!0){case!(o>5):case!(o<195):case!(r<390):break;case e.indexOf("|"+l+"|")>-1:p=n.split(" ");for(var s=0,t=p.length,u="";s<t;s++)f.indexOf(" "+p[s]+" ")>-1&&(u+=p[s]+" ");var v=!1;switch(!0){case o>20&&f.indexOf(n)>-1:case o>10&&(1==f.indexOf(n)||f.indexOf(n)==f.length-1-n.length):v=!0}var w=!1;switch(!0){case v:break;case o>2*(f.length-2)&&"h2"!=l:case o<Math.ceil(.5*(f.length-2)):case o<25&&u.length<Math.ceil(.75*o):case o<50&&u.length<Math.ceil(.65*o):case u.length<Math.ceil(.55*o):w=!0}if(w)break;default:var x=""+b.settings.articleTitleMarker__start+n+b.settings.articleTitleMarker__end,y=a.substr(j);return y=b.getContent__find__isolateTitleInHTML__balanceTagsAtStart__remove(y,"<div","</div>"),y=b.getContent__find__isolateTitleInHTML__balanceTagsAtStart__add(y,"<section","</section>"),y=b.getContent__find__isolateTitleInHTML__balanceTagsAtStart__add(y,"<article","</article>"),""+x+y}}}return a},b.getContent__find__isolateTitleInHTML__balanceTagsAtStart__substrCount=function(a,b,c,d){var e=0;if(a+="",b+="",isNaN(c)&&(c=0),isNaN(d)&&(d=0),0==b.length)return!1;for(c--;-1!=(c=a.indexOf(b,c+1));){if(d>0&&c+b.length>d)return!1;e++}return e},b.getContent__find__isolateTitleInHTML__balanceTagsAtStart__add=function(a,c,d){for(var e=a,f=-1,g=0,h=0;h<2&&(f=e.indexOf(d,g))>-1;h++){var i=e.substr(0,f);b.getContent__find__isolateTitleInHTML__balanceTagsAtStart__substrCount(i,c,0)<1+b.getContent__find__isolateTitleInHTML__balanceTagsAtStart__substrCount(i,d,0)?(e=c+">"+e,g=f+1):g=f+1}return e},b.getContent__find__isolateTitleInHTML__balanceTagsAtStart__remove=function(a,c,d){for(var e=a.replace(/^(\s*<\s*\/\s*[^>]+>)+/gi,""),f=-1,g=0,h=0;h<100&&(f=e.indexOf(d,g))>-1;h++){var i=e.substr(0,f),j=b.getContent__find__isolateTitleInHTML__balanceTagsAtStart__substrCount(i,c,0),k=j>0&&1+b.getContent__find__isolateTitleInHTML__balanceTagsAtStart__substrCount(i,d,0);!(j>0)||j<k?(e=e.substr(0,f)+e.substr(f+d.length),g=f):g=f+1}return e},b.getContent__specialCases=function(a){return b.getSpecialCaseArticle?b.getSpecialCaseArticle(a):null},b.getContent__findInPage=function(a){var c=!1,e=!1,f=!1,g=b.getSpecialCandidate();b.debugTimerStart("ExploreAndGetStuff");var h=g||b.getContent__specialCases(a)||a.document.body,i=b.getContent__exploreNodeAndGetStuff(h,!1,!g);b.debugRemember("ExploreAndGetStuff",b.debugTimerEnd()+"ms"),b.debugTimerStart("ProcessFirst");var j=b.getContent__processCandidates__first(i._candidates);if(c=j[0],f=c,b.debugRemember("ProcessFirst",b.debugTimerEnd()+"ms"),b.debug){b.log("First 5 Main Candidates:");for(var k in j){if(5==k)break;b.log(j[k],j[k].__node)}b.debugOutline(c.__node,"target","first")}b.debugRemember("Target","first");var l=b.parseOptions._find_this_in_page_attribute,m=l>""?b.$document.find("body").attr(l):"",n=m>""&&b.document.getElementById(m);switch(!0){case!!n:b.log("Using specified target element."),f={__node:n};break;case!(c._count__containers>0):case!(c._count__candidates>0):case!(c._count__pieces>0):case!(c._count__containers>25):break;default:b.debugTimerStart("ProcessSecond");var o=b.getContent__processCandidates__second(j);if(e=o[0],b.debugRemember("ProcessSecond",b.debugTimerEnd()+"ms"),c.__node==e.__node)break;if(b.debug){b.log("First 5 Second Candidates:");for(var k in o){if(5==k)break;b.log(o[k],o[k].__node)}b.debugOutline(e.__node,"target","second")}switch(c.__points_history_final=b.getContent__computePointsForCandidate__third(c,c),c.__points_final=c.__points_history_final[0],e.__points_history_final=b.getContent__computePointsForCandidate__third(e,c),e.__points_final=e.__points_history_final[0],b.debug&&(b.log("The 2 Candidates:"),b.log(c),b.log(e)),!0){case e.__candidate_details._count__lines_of_65_characters<20&&e.__points_final/c.__points_final>1:case e.__candidate_details._count__lines_of_65_characters>20&&e.__points_final/c.__points_final>.9:case e.__candidate_details._count__lines_of_65_characters>50&&e.__points_final/c.__points_final>.75:f=e,b.debugRemember("Target","second")}b.debug&&(b.debugRemember("PointsFirst",c.__points_history_final[0].toFixed(2)),b.debugRemember("PointsSecond",e.__points_history_final[0].toFixed(2)))}b.debug&&d(f.__node).css({"box-shadow":"inset 0px 0px 50px rgba(255, 255, 0, 0.95), 0px 0px 50px rgba(255, 255, 0, 0.95)"}),b.debugTimerStart("BuildHTML");var p=b.getContent__buildHTMLForNode(f.__node,"the-target");return p=p.substr(p.indexOf(">")+1),p=p.substr(0,p.lastIndexOf("<")),b.debugRemember("BuildHTML",b.debugTimerEnd()+"ms"),b.debugTimerStart("BuildHTMLPregs"),p=p.replace(/<span([^>]*?)>p<\/span>\s*?<\/(div|h1|h2|h3|h4|h5|h6|li|p|span)/gi,"</$2"),p=p.replace(/<(\/)?span([^>]*?)>/gi,""),p=p.replace(/<(blockquote|div|p|td|li)([^>]*)>(\s*<br \/>)+/gi,"<$1$2>"),p=p.replace(/(<br \/>\s*)+<\/(blockquote|div|p|td|li)>/gi,"</$2>"),p=p.replace(/(<br \/>\s*)+<(blockquote|div|h\d|ol|p|table|ul|li)([^>]*)>/gi,"<$2$3>"),p=p.replace(/<\/(blockquote|div|h\d|ol|p|table|ul|li)>(\s*<br \/>)+/gi,"</$1>"),p=p.replace(/(<hr \/>\s*<hr \/>\s*)+/gi,"<hr />"),p=p.replace(/(<br \/>\s*<br \/>\s*)+/gi,"<br /><br />"),b.debugRemember("BuildHTMLPregs",b.debugTimerEnd()+"ms"),{_html:p,_links:i._links,_targetCandidate:f,_firstCandidate:c}},b.start=function(){b.detectLanguage();var a=b.getContent__findInPage(b.window),c=a._links,e=a._targetCandidate.__node,f=d(e),g=[];switch(!0){case"rtl"==f.attr("dir"):case"rtl"==f.css("direction"):b.makeRTL()}var h=a._html,i=b.nextPage__getFirstFragment(h),j=b.document.title>""?b.escape_html(b.document.title):"",k=b.$document.find("meta[property='og:title']");if(k&&k.length>0&&(j=b.escape_html(k.attr("content"))),h=b.getContent__find__isolateTitleInHTML(h,j),b.articleTitle=b.getContent__find__getIsolatedTitleInHTML(h),b.debugRemember("TitleSource","target"),b.articleTitle>"");else{var l=a._targetCandidate.__node,m="",n="",o=a._firstCandidate.__node!=a._targetCandidate.__node;switch(function(){for(;;){switch(!0){case l.tagName&&"body"==l.tagName.toLowerCase():case o&&l==a._firstCandidate.__node:return}if(l.previousSibling)switch(l=l.previousSibling,b.debug&&b.debugOutline(l,"target","add-above"),m=b.getContent__buildHTMLForNode(l,"above-the-target"),n=m+n,g.unshift(l),n=b.getContent__find__isolateTitleInHTML(n,j),!0){case b.measureText__getTextLength(n.replace(/<[^>]+?>/gi,"").replace(/\s+/gi," "))>585:case b.getContent__find__hasIsolatedTitleInHTML(n):return}else l=l.parentNode}}(),!0){case b.getContent__find__hasIsolatedTitleInHTML(n):case o&&n.split("<a ").length<3&&b.measureText__getTextLength(n.replace(/<[^>]+?>/gi,"").replace(/\s+/gi," "))<195:h=n+h;break;default:n="",g=[]}b.articleTitle=b.getContent__find__getIsolatedTitleInHTML(h),b.debugRemember("TitleSource","above_HTML"),b.articleTitle>""||(!function(){if(j>""){for(var a=[],c=[/( [-][-] |( [-] )|( [>][>] )|( [<][<] )|( [|] )|( [\/] ))/i,/(([:] ))/i],d=0,e=c.length;d<e&&(a=j.split(c[d]),!(a.length>1));d++);a.sort(function(a,b){switch(!0){case a.length>b.length:return-1;case a.length<b.length:return 1;default:return 0}}),h=""+b.settings.articleTitleMarker__start+(a[0].split(/\s+/i).length>1?a[0]:j)+b.settings.articleTitleMarker__end+h}}(),b.articleTitle=b.getContent__find__getIsolatedTitleInHTML(h),b.debugRemember("TitleSource","document_title"))}b.debugRemember("theTarget",a._targetCandidate.__node),b.debugRemember("firstCandidate",a._firstCandidate.__node),b.nextPage__firstFragment__firstPage=i,b.nextPage__firstFragment__lastPage=b.nextPage__getFirstFragment(h),b.nextPage__firstLinks=c;var p={_html:h,_title:b.articleTitle,_language:b.language,_rtl:b.rtl,_rtl_maybe:b.maybeRTL};p._elements=g,p._elements.push(a._targetCandidate.__node),b.callbacks.finished(p)},b}