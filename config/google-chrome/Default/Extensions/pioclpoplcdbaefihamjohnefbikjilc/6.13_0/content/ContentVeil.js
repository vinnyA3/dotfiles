/*! Copyright 2009-2017 Evernote Corporation. All rights reserved. */

function ContentVeil(){"use strict";function a(a){clearTimeout(t),t=setTimeout(function(){a.target.className+=" tooltipon"},250)}function b(){clearTimeout(t),this.className=this.className.replace(/\s*tooltipon/g,"")}function c(a){u.classList.toggle("fixed",a)}function d(a){u.classList.toggle("blocking",a)}function e(a){z=!1,I=null,J=null,K=0,L=0,N=!1,v.className=v.className.replace(/\s*evernoteShadowBox/g,""),u.className=v.className.replace(/\s*evernoteShadowBox/g,""),a||r(),x.className=x.className.replace(/\s*evernoteUsingExpandContract/g,""),y.className=y.className.replace(/s*evernoteUsingExpandContract/g,""),p("embed"),f()}function f(){u.style.height=document.body.scrollHeight+"px",0==document.body.scrollHeight&&document.body.children.length>0&&(u.style.height=document.body.children[0].scrollHeight+"px"),u.style.width=document.body.scrollWidth+"px",u.style.borderWidth="0"}function g(a){h(),v.style.display="none",u.style.backgroundColor=a||"rgba(255, 255, 255, 0.75)"}function h(){if(v.style.display="",u.style.backgroundColor="",!u.parentNode){for(var a=0;a<2;a++)A[a].setAttribute("tooltip",Browser.i18n.getMessage("expandArticleTooltip")),B[a].setAttribute("tooltip",Browser.i18n.getMessage("contractArticleTooltip"));document.documentElement.appendChild(u)}}function i(){u.parentNode&&u.parentNode.removeChild(u)}function j(){return!u.parentNode}function k(a,b){return{top:a.top-b,left:a.left-b,bottom:a.bottom+b,right:a.right+b,width:a.width+2*b,height:a.height+2*b}}function l(a,b,c,d){I=a,J&&I!==b&&H.disconnect(),b&&(J=b,H.observe(b,G)),K=document.body.scrollTop,L=document.body.scrollLeft,M=c,N=d,a=k(a,8);var e=a.left,f=a.top,g=a.width,h=a.height,i=u.style.width.replace("px",""),j=u.style.height.replace("px","");v.className=v.className.replace(/\s*evernoteShadowBox/g,""),u.className=v.className.replace(/\s*evernoteShadowBox/g,""),d&&(v.className+=" evernoteShadowBox",u.className+=" evernoteShadowBox"),v.style.display="block",u.style.borderLeftWidth=Math.max(e,0)+"px",u.style.borderTopWidth=Math.max(f,0)+"px",u.style.borderRightWidth=Math.max(i-e-g,0)+"px",u.style.borderBottomWidth=Math.max(j-f-h,0)+"px"}function m(a,b,c,d){z=d,l(a,b,!0,c)}function n(a,b,c,d){var f=contentPreview.computeDescendantBoundingBox(a,z);f?(e(d),l(f,a,!0,c),b&&a.scrollIntoView(!0),o("embed",a),x.className+=" evernoteUsingExpandContract",f.height>window.innerHeight?y.className+=" evernoteUsingExpandContract":y.className=y.className.replace(/\s*evernoteUsingExpandContract/g,""),h()):log.warn("Couldn't create rectangle from element: "+a.cloneNode(!1).outerHTML)}function o(a,b){for(var c=document.getElementsByTagName(a),d=0;d<c.length;d++)c[d].enSavedVisibility=c[d].style.visibility,c[d].style.visibility="hidden";p(a,b)}function p(a,b){b||(b=document);for(var c=b.getElementsByTagName(a),d=0;d<c.length;d++)void 0!==c[d].enSavedVisibility&&(c[d].style.visibility=c[d].enSavedVisibility,delete c[d].enSavedVisibility)}function q(){return u}function r(a){w.innerText=a?1==a?Browser.i18n.getMessage("oneMorePageFound"):Browser.i18n.getMessage("morePagesFound",[a.toString()]):"",w.scrollIntoView(!0)}function s(){if(J){var a=contentPreview.computeDescendantBoundingBox(J,z);a&&(f(),N?l(a,J,!0,!0):l(a,J,!0,!1))}}var t,u=document.createElement("div");u.id="evernoteContentVeil";var v=document.createElement("div");v.id="evernoteInnerBox";var w=document.createElement("div");w.id="evernotePageCounter",u.appendChild(w),u.appendChild(v);for(var x,y,z,A={},B={},C=0;C<2;C++){var D=document.createElement("div"),E=document.createElement("div");D.className="evernoteArticleExpand",E.className="evernoteArticleContract",A[C]=D,B[C]=E,D.addEventListener("click",function(){contentPreview.expandPreview()}),E.addEventListener("click",function(){contentPreview.contractPreview()}),D.addEventListener("mousemove",a),D.addEventListener("mouseout",b),E.addEventListener("mousemove",a),E.addEventListener("mouseout",b),0==C?(x=document.createElement("div"),x.className="evernoteExpandContract evernoteUsingExpandContract",x.appendChild(D),x.appendChild(E),u.appendChild(x)):(y=document.createElement("div"),y.id="bottomExpandContract",y.className="evernoteExpandContract",y.appendChild(D),y.appendChild(E),u.appendChild(y))}var F,G={childList:!0,subtree:!0,characterData:!0,attributes:!0},H=new MutationObserver(function(a){F&&window.clearTimeout(F),F=window.setTimeout(function(){s()},300)}),I=null,J=null,K=0,L=0,M=!1,N=!1;window.addEventListener("scroll",function(a){if(I&&!M){var b={top:I.top,bottom:I.bottom,left:I.left,right:I.right,width:I.width,height:I.height},c=document.body.scrollTop-K,d=document.body.scrollLeft-L;if(!c&&!d)return;b.top-=c,b.bottom-=c,b.left-=d,b.right-=d,f(),l(b,J)}}),window.addEventListener("resize",function(a){if(J){var b=contentPreview.computeDescendantBoundingBox(J,z);b&&(f(),N?l(b,J,!0,!0):l(b,J,!0,!1))}}),this.reset=e,this.fixPosition=c,this.blockMouse=d,this.show=h,this.gray=g,this.getElement=q,this.hide=i,this.isHidden=j,this.revealRect=l,this.revealStaticRect=m,this.outlineElement=n,this.expandRect=k,this.setPageCount=r,Object.preventExtensions(this)}