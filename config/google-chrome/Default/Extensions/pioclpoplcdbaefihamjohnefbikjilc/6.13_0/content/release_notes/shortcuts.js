/*! Copyright 2009-2017 Evernote Corporation. All rights reserved. */

function closeWindow(){port.postMessage({name:"close"})}function msgHandlerConfig(a,b,c){/china/i.test(a.bootstrapInfo.name)&&document.body.classList.add("china"),nameValue=a.options;for(var d in a.options)valueName[a.options[d]]=d;new ShortcutSetter(document.getElementById("textbox"),a.options.startWebClipperShortcut,"releaseNotes",function(a,b){return valueName[b]?"startWebClipperShortcut"!==valueName[b]&&{conflict:!0}:/(\||^)27(\||$)/.test(b)?{noEsc:!0}:(Browser.sendToExtension({name:"main_setOption",options:{startWebClipperShortcut:b}}),Browser.sendToExtension({name:"bounceToAll",message:{name:"updateKeyboardShortcut",oldShortcut:nameValue.startWebClipperShortcut,shortcut:b,shortcutName:"startWebClipperShortcut"}}),delete valueName[nameValue.startWebClipperShortcut],valueName[b]="startWebClipperShortcut",nameValue.startWebClipperShortcut=b,!1)},null,function(){},function(){return!1},function(a){return charCodeCache[a]}),c&&"function"==typeof c&&c()}function msgHandlerReceivePersistentValue(a,b,c){"charCodeCache"===a.key&&(charCodeCache=a.value||{},Browser.sendToExtension({name:"main_getConfig",options:{startWebClipperShortcut:!1,closeWebClipperShortcut:!1,previewArticleShortcut:!1,previewFullPageShortcut:!1,previewUrlShortcut:!1,selectionModeShortcut:!1,takeScreenshotShortcut:!1,clearlyShortcut:!1,pdfShortcut:!1,emailShortcut:!1,expandArticleShortcut:!1,contractArticleShortcut:!1,moveArticleUpShortcut:!1,moveArticleDownShortcut:!1,toggleAccountShortcut:!1,selectNotebookShortcut:!1,addTagsShortcut:!1,saveShortcut:!1,minimizeClipperShortcut:!1,selectAllMarkupShortcut:!1,arrowShortcut:!1,textShortcut:!1,rectangleShortcut:!1,roundedRectangleShortcut:!1,ellipseShortcut:!1,lineShortcut:!1,markerShortcut:!1,highlighterShortcut:!1,stampShortcut:!1,pixelateShortcut:!1,cropShortcut:!1,zoomInShortcut:!1,zoomOutShortcut:!1,zoomToFitShortcut:!1,zoomToOriginalShortcut:!1,undoShortcut:!1,redoShortcut:!1},bootstrapInfo:{name:null},returnName:"releaseNotesConfig"})),c&&"function"==typeof c&&c()}window.NAME=SHORTCUT_RELEASE_NOTES;var nameValue={},valueName={},charCodeCache={};window.addEventListener("DOMContentLoaded",function(){GlobalUtils.localize(document.body),document.getElementById("close").addEventListener("click",closeWindow),document.getElementById("body").innerHTML=Browser.i18n.getMessage("shortcutReleaseNotesBody",Browser.extension.getURL("options.html")+"#shortcuts"),document.getElementById("button").addEventListener("click",closeWindow),startSecretGeneration(),Browser.sendToExtension({name:"getPersistentValue",key:"charCodeCache"})}),Browser.addMessageHandlers({receivePersistentValue:msgHandlerReceivePersistentValue,releaseNotesConfig:msgHandlerConfig});